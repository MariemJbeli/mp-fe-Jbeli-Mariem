<div>
  <!-- Ajoutez une condition pour afficher le formulaire uniquement en mode édition -->
  <!-- Add $event as the argument to ngSubmit -->
<form *ngIf="enEdition" [formGroup]="produitForm" (ngSubmit)="validerFormulaire(produitForm)">



    <h1> Editer le Produit </h1>
    <table class="table table-striped">
      <tr>
        <td> Id: </td>
        <td>
          <input id="id" name="id" type="text" formControlName="id" required [readonly]="enEdition"
            style="background-color: gainsboro;" />
        </td>
      </tr>
      <tr>
        <td> Code: </td>
        <td>
          <input type="text" name="code" formControlName="code" />
        </td>
      </tr>
      <tr>
        <td> Désignation: </td>
        <td>
          <input type="text" name="designation" formControlName="designation" />
        </td>
      </tr>
      <tr>
        <td> Prix: </td>
        <td>
          <input type="text" name="prix" formControlName="prix" />
        </td>
      </tr>
      <tr>
        <td> Catégorie: </td>
        <td>
          <!-- Ajoutez une liste déroulante pour la catégorie -->
          <select name="categorie" formControlName="categorie" required>
            <option *ngFor="let categ of categ" [value]="categ.id">
              {{categ.libelle}}
            </option>
          </select>
        </td>
      </tr>
      <tr>
        <td [attr.colspan]="2" align="center">
          <button type="submit" class="btn btn-success" style="background-color: green; color: white;">
            <span class="bi bi-pen"></span> Valider
          </button>
          
        </td>
      </tr>
    </table>
  </form>
</div>

<div>
  <h1> Liste des produits </h1>
  <table class="table table-striped">
    <thead>
      <tr>
        <th> Id </th>
        <th> Code </th>
        <th> Designation </th>
        <th> Prix </th>
        <th> Categorie </th>
        <th colspan="3"> Actions </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of produits">
        <td> {{p.id}} </td>
        <td> {{p.code}} </td>
        <td> {{p.designation}} </td>
        <td> {{p.prix}} </td>
        <td> {{p.categorie ? p.categorie.libelle : 'N/A'}} </td>
        <td>
          <button (click)="editerProduit(p.id)" class="btn btn-dark">
            <i class="bi bi-pen"></i> Editer
          </button>
        </td>
        
        <td>
          <button type="button" (click)="supprimerProduit (p.id)" class="btn btn-danger">
            <i class="bi bi-trash"></i>Supprimer</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>